{% extends "base.html" %}

{% block title %}Warehouses - Warehouse Management{% endblock %}

{% block content %}
<h1>Warehouses</h1>

{% if warehouses %}
<ul class="warehouse-list">
    {% for id, warehouse in warehouses.items() %}
    <li class="warehouse-item">
        <h3>{{ warehouse.name }}</h3>
        <p>Capacity: {{ warehouse.varasto.tilavuus }}</p>
        <p>Stock: {{ warehouse.varasto.saldo }} (Space left: {{ warehouse.varasto.paljonko_mahtuu() }})</p>
        <div class="stock-bar">
            {% if warehouse.varasto.tilavuus > 0 %}
            <div class="stock-fill" style="width: {{ (warehouse.varasto.saldo / warehouse.varasto.tilavuus * 100)|int }}%"></div>
            {% else %}
            <div class="stock-fill" style="width: 0%"></div>
            {% endif %}
        </div>
        <div class="actions">
            <a href="{{ url_for('view_warehouse', warehouse_id=id) }}" class="btn">View Details</a>
            <a href="{{ url_for('edit_warehouse', warehouse_id=id) }}" class="btn btn-warning">Edit</a>
            <form action="{{ url_for('delete_warehouse', warehouse_id=id) }}" method="post" style="display:inline">
                <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this warehouse?')">Delete</button>
            </form>
        </div>
    </li>
    {% endfor %}
</ul>
{% else %}
<p>No warehouses yet. <a href="{{ url_for('create_warehouse') }}">Create one!</a></p>
{% endif %}
{% endblock %}
